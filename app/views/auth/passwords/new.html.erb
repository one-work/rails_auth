<%= link_to({ controller: 'sessions', action: 'new' }) do %>
  <%= svg_tag 'angle-left' %>
  <span>返回登录</span>
<% end %>
<h4 class="title is-3 text-centered text-primary"><%= t('.title') %></h4>
<div id="alert"></div>
<div id="password_form_wrapper" class="mt-3">
  <%= form_with scope: nil, url: { action: 'create' }, id: 'password_form' do %>
  <% end %>
  <div data-controller="form" class="panel-block background-white flex-direction-column">
    <div class="control">
      <%= text_field_tag :identity, nil, required: true, autofocus: true, placeholder: Auth::Account.human_attribute_name(:identity), form: 'password_form', class: 'input is-medium' %>
    </div>
    <div class="field is-grouped mt-4">
      <div class="control is-expanded">
        <%= text_field_tag :token, nil, form: 'password_form', placeholder: '请输入验证码', class: 'input is-medium' %>
      </div>
      <div class="control">
        <%= button_to({ controller: 'verify_tokens', action: 'create' }, params: { identity: nil }, class: 'button is-medium is-primary', form: { id: 'verify_token', data: { controller: 'button-to', button_to_mappings_value: { identity: 'identity' }.to_json } }) do %>
          <span>获取验证码</span>
        <% end %>
      </div>
    </div>
    <div class="control">
      <%= submit_tag t('.next'), form: 'password_form', class: 'button is-medium is-fullwidth is-primary mt-4' %>
    </div>
  </div>
</div>
